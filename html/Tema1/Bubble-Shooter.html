<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble-Shooter</title>
</head>
<body>
    <h1 id="bubble-shooter" class="titulo">Bubble Shooter</h1>
    <p>En esta demo he intentado replicar el lazamiento de bolas que encontramos en juegos como bubble witch saga o bubble shooter,
    basicamente eliges hacia donde quieres que salga la bola y el juego lanza una bola en esa dirección. Yo he hecho eso
    pero en 2d en vez de en 3d, calculando la direccion de salida en base a las posiciones del raton en el momento del click.</p>
    <editor-container style="display:block;margin:auto;width:700px;"><math-type style="user-select:text;" class=" math-type-for-print "><math-edit-container><editarea style="font-family: Arial, Helvetica, sans-serif; font-size: 15px;"><area-container><line class="root text-mode selected align-center full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram role-diagram-selected role-prevent-selection inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 183.556px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".18848635841048367" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.18848635841048367)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M192,129 C192,115.19 203.19,104 217,104 C230.81,104 242,115.19 242,129 C242,142.81 230.81,154 217,154 C203.19,154 192,142.81 192,129 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M335,82 C335,68.19 346.19,57 360,57 C373.81,57 385,68.19 385,82 C385,95.81 373.81,107 360,107 C346.19,107 335,95.81 335,82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M360,82 L460.14,42.51" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.9302895782379645,0.36682598138876416,-0.36682598138876416,-0.9302895782379645,462.00000000000006,41.78125)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 193px; top: 117px;"><dg-editor-container data-editor-id="de03304158915063016" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Salida</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 382px; top: 27px;"><dg-editor-container data-editor-id="de8076358143783964" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><compositeblock dir="ltr" class="over-arrow-symbol ig-ex-br"><arrow-symbol style="height: 0.588235em; margin-bottom: -0.235294em;"><svg style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%;"><path d=" M 42.31 5.39 l -3.50 -3.69 l -0.54 0.58 l 2.14 2.58 h -0.17 v 1.00 h 0.17 l -2.14 2.58 l 0.54 0.58 z  M 1.87 5.81 h 39.93 v -1.00 h -39.93 z" stroke="none"></path></svg></arrow-symbol><editarea class="no-area-container"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">V</block><compositeblock dir="ltr" class="power-index-symbol-container inline"><middle-base><inline></inline></middle-base><editarea-line class=" index-value" style="line-height: 1.2; margin-top: -0.747899em;"><baselineblock></baselineblock><block>salida</block></editarea-line></compositeblock></line></editarea></compositeblock></line></editarea></compositeblock></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line></area-container></editarea><div></div></math-edit-container></math-type></editor-container>  
    <p>En mi caso para calcular la 
        <math  class="tml-display"><mover><msub><mi>V</mi><mtext>salida</mtext></msub><mo stretchy="true" style="math-style:normal;math-depth:0;">→</mo></mover></math>
        , lo que hago es restar la posicion del raton y la posición del emisor, para sacar el vector velocidad de la bola que creamos.</p>
        <pre><code><span class="hljs-keyword">void</span> updateSimulation()
            {
                _simTime += SIM_STEP;
            
                <span class="hljs-keyword">if</span>(<span class="hljs-built_in">mousePressed</span>)
                {
                    _direccion = <span class="hljs-keyword">PVector</span>.sub(<span class="hljs-keyword">new</span> <span class="hljs-keyword">PVector</span>(<span class="hljs-built_in">mouseX</span>, <span class="hljs-built_in">height</span> - <span class="hljs-built_in">mouseY</span>), _e);
                    _direccion.normalize();
                    _direccion.mult(velocidad);
                }
                _p.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">PVector</span>.mult(_direccion, SIM_STEP));
            
                <span class="hljs-keyword">if</span>(<span class="hljs-keyword">PVector</span>.<span class="hljs-built_in">dist</span>(_p, _s) &lt; <span class="hljs-number">40</span> ||(_p.x &lt; <span class="hljs-number">0</span> || _p.y &lt; <span class="hljs-number">0</span>) || (_p.x &gt; <span class="hljs-built_in">width</span> || _p.y &gt;<span class="hljs-built_in">height</span>))
                {
                    _p.<span class="hljs-built_in">set</span>(_e);
                    _direccion.<span class="hljs-built_in">set</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);
                }
            }
            </code></pre>
    <h5>Resultado Final</h5>
    <div class="d-flex justify-content-center">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/3690QACYqIA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
</body>
</html>