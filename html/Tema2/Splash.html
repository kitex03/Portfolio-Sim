<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Splash</title>
</head>
<body>
    <h1 class="titulo">Splash</h1>
    <p>
        Para esta demos he utilizado el codigo de la simulación de la flotabilidad, y cada vez que la bola entra y sale del agua, 
        se genera un sistema de partículas, que trata de simular la salpicadura que se produce cuando entras a un liquido.
    </p>
    <editor-container style="display:block;margin:auto;width:700px;"><math-type style="user-select:text;" class=" math-type-for-print "><math-edit-container><editarea style="font-family: Arial, Helvetica, sans-serif; font-size: 15px;"><area-container><line class="root text-mode selected full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 220px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".4526036979310062" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.4526036979310062)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M138.65,111.42 C142.85,113.98 146.88,116.42 151.4,116.42 C155.92,116.42 159.7,113.98 163.65,111.42 C167.6,108.86 171.38,106.42 175.9,106.42 C180.42,106.42 184.45,108.86 188.65,111.42 C192.85,113.98 196.88,116.42 201.4,116.42 C205.92,116.42 209.7,113.98 213.65,111.42 C217.6,108.86 221.38,106.42 225.9,106.42 C230.42,106.42 234.45,108.86 238.65,111.42 C242.85,113.98 246.88,116.42 251.4,116.42 C255.92,116.42 259.7,113.98 263.65,111.42 C267.6,108.86 271.38,106.42 275.9,106.42 C280.42,106.42 284.45,108.86 288.65,111.42 C292.85,113.98 296.88,116.42 301.4,116.42 C305.92,116.42 309.7,113.98 313.65,111.42 C317.6,108.86 321.38,106.42 325.9,106.42 C330.42,106.42 334.45,108.86 338.65,111.42 C342.85,113.98 346.88,116.42 351.4,116.42 C355.92,116.42 359.7,113.98 363.65,111.42 C367.6,108.86 371.38,106.42 375.9,106.42 C380.42,106.42 384.45,108.86 388.65,111.42 C392.85,113.98 396.88,116.42 401.4,116.42 C405.92,116.42 409.7,113.98 413.65,111.42 C417.6,108.86 421.38,106.42 425.9,106.42 C430.42,106.42 434.45,108.86 438.65,111.42 C442.85,113.98 446.88,116.42 451.4,116.42 C455.92,116.42 459.7,113.98 463.65,111.42 C467.6,108.86 471.38,106.42 475.9,106.42 C480.42,106.42 484.45,108.86 488.65,111.42 C492.85,113.98 496.88,116.42 501.4,116.42 C505.92,116.42 509.7,113.98 513.65,111.42 C514.49,110.87 515.33,110.33 516.17,109.82" style="stroke-width: 1; stroke: rgb(0, 0, 0);"></path></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M328,108 L328,173.42" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,328,175.421875)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M328,108 L328,48.42" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(3.061616997868383e-16,1,-1,3.061616997868383e-16,328,46.421875)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="composite-shape"><path class="real" d=" M303,108 C303,94.19 314.19,83 328,83 C341.81,83 353,94.19 353,108 C353,121.81 341.81,133 328,133 C314.19,133 303,121.81 303,108 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M277.66,98.67 C277.66,95.54 280.2,93 283.33,93 C286.46,93 289,95.54 289,98.67 C289,101.8 286.46,104.34 283.33,104.34 C280.2,104.34 277.66,101.8 277.66,98.67 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M299.66,79.67 C299.66,76.54 302.2,74 305.33,74 C308.46,74 311,76.54 311,79.67 C311,82.8 308.46,85.34 305.33,85.34 C302.2,85.34 299.66,82.8 299.66,79.67 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M332.66,99.67 C332.66,96.54 335.2,94 338.33,94 C341.46,94 344,96.54 344,99.67 C344,102.8 341.46,105.34 338.33,105.34 C335.2,105.34 332.66,102.8 332.66,99.67 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M353.66,98.67 C353.66,95.54 356.2,93 359.33,93 C362.46,93 365,95.54 365,98.67 C365,101.8 362.46,104.34 359.33,104.34 C356.2,104.34 353.66,101.8 353.66,98.67 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M349.66,57.67 C349.66,54.54 352.2,52 355.33,52 C358.46,52 361,54.54 361,57.67 C361,60.8 358.46,63.34 355.33,63.34 C352.2,63.34 349.66,60.8 349.66,57.67 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M377.66,91.67 C377.66,88.54 380.2,86 383.33,86 C386.46,86 389,88.54 389,91.67 C389,94.8 386.46,97.34 383.33,97.34 C380.2,97.34 377.66,94.8 377.66,91.67 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M273.66,73.67 C273.66,70.54 276.2,68 279.33,68 C282.46,68 285,70.54 285,73.67 C285,76.8 282.46,79.34 279.33,79.34 C276.2,79.34 273.66,76.8 273.66,73.67 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M297.66,59.67 C297.66,56.54 300.2,54 303.33,54 C306.46,54 309,56.54 309,59.67 C309,62.8 306.46,65.34 303.33,65.34 C300.2,65.34 297.66,62.8 297.66,59.67 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M309.66,97.67 C309.66,94.54 312.2,92 315.33,92 C318.46,92 321,94.54 321,97.67 C321,100.8 318.46,103.34 315.33,103.34 C312.2,103.34 309.66,100.8 309.66,97.67 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 327px; top: 132px;"><dg-editor-container data-editor-id="de13649377104486016" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><compositeblock dir="ltr" class="over-arrow-symbol ig-ex-br"><arrow-symbol style="height: 0.588235em; margin-bottom: -0.235294em;"><svg style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%;"><path d=" M 32.25 5.39 l -3.50 -3.69 l -0.54 0.58 l 2.14 2.58 h -0.17 v 1.00 h 0.17 l -2.14 2.58 l 0.54 0.58 z  M 1.87 5.81 h 29.87 v -1.00 h -29.87 z" stroke="none"></path></svg></arrow-symbol><editarea class="no-area-container"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">F</block><compositeblock dir="ltr" class="power-index-symbol-container inline"><middle-base><inline></inline></middle-base><editarea-line class=" index-value" style="line-height: 1.2; margin-top: -0.747899em;"><baselineblock></baselineblock><block>peso</block></editarea-line></compositeblock></line></editarea></compositeblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 331px; top: 56px;"><dg-editor-container data-editor-id="de6645266523502178" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><compositeblock dir="ltr" class="over-arrow-symbol ig-ex-br"><arrow-symbol style="height: 0.588235em; margin-bottom: -0.235294em;"><svg style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%;"><path d=" M 68.65 5.39 l -3.50 -3.69 l -0.54 0.58 l 2.14 2.58 h -0.17 v 1.00 h 0.17 l -2.14 2.58 l 0.54 0.58 z  M 1.87 5.81 h 66.27 v -1.00 h -66.27 z" stroke="none"></path></svg></arrow-symbol><editarea class="no-area-container"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">F</block><compositeblock dir="ltr" class="power-index-symbol-container inline"><middle-base><inline></inline></middle-base><editarea-line class=" index-value" style="line-height: 1.2; margin-top: -0.747899em;"><baselineblock></baselineblock><block>flotabilidad</block></editarea-line></compositeblock></line></editarea></compositeblock></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line></area-container></editarea><div></div></math-edit-container></math-type></editor-container>
    <p>
        Como se puede ver en el dibujo, las partículas nacen de la bola que flota en el agua y describen una trayectoria 
        recta, que se va desvaneciendo con el tiempo. Para calcular las normales de la velocidad, he utilizado un angulo aleatorio
        comprendido entre [0, π], porque la pelota salpicara en todas direcciones, por encima de la superficie del agua.
    </p>
    <pre><code><span class="hljs-keyword">void</span> updateSimulation()
        {
            _ps.update(_timeStep);
            bola.update(_timeStep);
            <span class="hljs-keyword">if</span>(bola.getPos().y &lt; <span class="hljs-built_in">height</span>/<span class="hljs-number">2</span>)
                splashed = <span class="hljs-keyword">false</span>;
        
            <span class="hljs-keyword">if</span>(bola.Colision(plano) &amp;&amp; splashed == <span class="hljs-keyword">false</span>){
                _ps.SetPosEmisor(bola.getPos());
                <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; NUM_PARTICULAS_SPLASH; i++)
                {
                    <span class="hljs-keyword">PVector</span> pos_particula = <span class="hljs-keyword">new</span> <span class="hljs-keyword">PVector</span>(<span class="hljs-built_in">random</span>(<span class="hljs-number">-10</span>, <span class="hljs-number">10</span>), <span class="hljs-built_in">random</span>(<span class="hljs-number">-0.1</span>, <span class="hljs-number">0.1</span>));
                    <span class="hljs-built_in">float</span> angulo = <span class="hljs-built_in">random</span>(<span class="hljs-number">0.0</span>, <span class="hljs-literal">PI</span>);
                    <span class="hljs-keyword">PVector</span> vel_particula = <span class="hljs-keyword">new</span> <span class="hljs-keyword">PVector</span>(-VELOCIDAD_PARTICULAS*<span class="hljs-built_in">cos</span>(angulo), -VELOCIDAD_PARTICULAS*<span class="hljs-built_in">sin</span>(angulo));
                    _ps.addParticle(_M, pos_particula, vel_particula,RADIO_PARTICULA, COLOR_PARTICULA, L);
                }
                splashed = <span class="hljs-keyword">true</span>;
            }
        
            _simTime += _timeStep; 
        
        }
    </code></pre>
    <h5>Resultado Final:</h5>
    <div class="d-flex justify-content-center">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/Wuf2hAbJ-sE" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
</body>
</html>