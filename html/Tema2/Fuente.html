<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1 class="titulo">Fuente</h1>
    <p>
        En esta demo he intentado simular el comportamiento de una fuente. 
        Tenemos un emisor, el grifo de la fuente, y de ahi sales multiples particulas que simulan el agua fluyendo. 
    </p>
    <editor-container style="display:block;margin:auto;width:700px;"><math-type style="user-select:text;" class=" math-type-for-print "><math-edit-container><editarea  style="font-family: Arial, Helvetica, sans-serif; font-size: 15px;"><area-container><line class="root text-mode selected full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 180px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".40584597639528996" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.40584597639528996)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M157,135 C157,121.19 168.19,110 182,110 C195.81,110 207,121.19 207,135 C207,148.81 195.81,160 182,160 C168.19,160 157,148.81 157,135 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M182,135 L40.55,20.59" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(0.7774753662986403,0.6289133921286738,-0.6289133921286738,0.7774753662986403,39,19.328125)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M182,135 L318.47,20.61" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.7663809009012865,0.6423864216604617,-0.6423864216604617,-0.7663809009012865,319.99999999999994,19.328125)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="composite-shape"><path class="real" d=" M154,106.5 C154,103.46 156.46,101 159.5,101 C162.54,101 165,103.46 165,106.5 C165,109.54 162.54,112 159.5,112 C156.46,112 154,109.54 154,106.5 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M176.5,104.5 C176.5,101.46 178.96,99 182,99 C185.04,99 187.5,101.46 187.5,104.5 C187.5,107.54 185.04,110 182,110 C178.96,110 176.5,107.54 176.5,104.5 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M199,87.5 C199,84.46 201.46,82 204.5,82 C207.54,82 210,84.46 210,87.5 C210,90.54 207.54,93 204.5,93 C201.46,93 199,90.54 199,87.5 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M141.67,87.16 C141.67,84.31 143.98,82 146.84,82 C149.69,82 152,84.31 152,87.16 C152,90.02 149.69,92.33 146.84,92.33 C143.98,92.33 141.67,90.02 141.67,87.16 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M168,72.5 C168,69.46 170.46,67 173.5,67 C176.54,67 179,69.46 179,72.5 C179,75.54 176.54,78 173.5,78 C170.46,78 168,75.54 168,72.5 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M204,45.5 C204,42.46 206.46,40 209.5,40 C212.54,40 215,42.46 215,45.5 C215,48.54 212.54,51 209.5,51 C206.46,51 204,48.54 204,45.5 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M190,64.5 C190,61.46 192.46,59 195.5,59 C198.54,59 201,61.46 201,64.5 C201,67.54 198.54,70 195.5,70 C192.46,70 190,67.54 190,64.5 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M162,49.5 C162,46.46 164.46,44 167.5,44 C170.54,44 173,46.46 173,49.5 C173,52.54 170.54,55 167.5,55 C164.46,55 162,52.54 162,49.5 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M204.5,87.5 C264,37.33 271,20.33 295,67.33" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 294px; top: 43px;"><dg-editor-container data-editor-id="de04138022451451184" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>PI/4</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 19px; top: 42px;"><dg-editor-container data-editor-id="de8505199474378853" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>3*PI/4</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line></area-container></editarea><div></div></math-edit-container></math-type></editor-container>
    <p>
        Como se puede ver en el dibujo, las partículas nacen de un punto y tienen una trayectoria,
        que va en un rango entre 3π/4 y π/4, para posteriormente caer debido a la gravedad.
    </p>
    <p>
        Para sacar los vectores velocidad de las partículas, lo que hago es sacar un angulo aleatorio entre 3π/4 y π/4,
        para calcular los vectores normales y posteriormente multiplico estos vectores por la magnitud de la velocidad en 
        cada componente, siendo x la mitad de la magnitud de la velocidad, para que las particulas describan una trayectoria como
        la del dibujo. 
    </p>
    <pre><code><span class="hljs-keyword">void</span> updateSimulation()
        {
            _ps.update(_timeStep);
            <span class="hljs-built_in">float</span> particula_por_paso = NT * _timeStep;
        
           <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; particula_por_paso; i++){
                <span class="hljs-keyword">PVector</span> s = <span class="hljs-keyword">new</span> <span class="hljs-keyword">PVector</span>(<span class="hljs-built_in">random</span>( EXTREMOS_POSICION[<span class="hljs-number">0</span>], EXTREMOS_POSICION[<span class="hljs-number">1</span>]), <span class="hljs-number">0.0</span>);
                <span class="hljs-built_in">float</span> angulo = <span class="hljs-built_in">random</span>(<span class="hljs-literal">PI</span>/<span class="hljs-number">4</span>, <span class="hljs-number">3</span>*<span class="hljs-literal">PI</span>/<span class="hljs-number">4</span>);
                <span class="hljs-keyword">PVector</span> v = <span class="hljs-keyword">new</span> <span class="hljs-keyword">PVector</span>(VELOCIDAD_PARTICULAS/<span class="hljs-number">2</span> * -<span class="hljs-built_in">cos</span>(angulo), VELOCIDAD_PARTICULAS * -<span class="hljs-built_in">sin</span>(angulo));
                _ps.addParticle(_M, s, v, RADIO_PARTICULA, COLOR_PARTICULA, L);
           }
            _simTime += _timeStep;  <span class="hljs-comment">// Incrementar el tiempo simulado</span>
        }
    </code></pre>
    <h5>Resultado Final:</h5>
    <div class="d-flex justify-content-center">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/SS7IaaSwExk" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
</body>
</html>